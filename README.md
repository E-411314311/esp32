# ESP32 記憶挑戰遊戲 (Simon Says)

## 專案簡介

這是一個基於 ESP32 開發板實作的經典「Simon Says」記憶挑戰遊戲。玩家需要記憶並重複裝置隨機生成的燈光序列，以挑戰更高的關卡。本專案結合了 MicroPython、GPIO 控制、I2C 通訊和 OLED 顯示技術，提供直觀的視覺回饋和互動體驗。

## 專案目的

* **應用課堂知識**：整合 ESP32 硬體控制、感測器應用（按鈕）、通訊技術（I2C 與 OLED 顯示）等所學。
* **提升實作能力**：透過從設計到除錯的完整流程，培養專案開發與問題解決能力。
* **設計互動介面**：利用 OLED 顯示器提供豐富的遊戲資訊和動畫效果。

## 功能特色

* **經典記憶玩法**：隨機生成燈光序列，挑戰玩家記憶力。
* **OLED 視覺回饋**：
    * 顯示關卡數、遊戲提示（「看著我！」、「成功！」、「遊戲結束！」）。
    * 顯示遊戲元素（「紅」、「黃」、「綠」顏色標示、方框、選擇箭頭、確認勾號）。
    * 自定義字符繪製，提供更豐富的顯示效果。
* **LED 燈號指示**：三顆 LED (紅、黃、綠) 依照序列閃爍。
* **按鈕互動**：兩個按鈕用於選擇選項和確認輸入。
* **遊戲進度提示**：成功過關後有燈號閃爍的升級效果；遊戲失敗後有燈號閃爍的失敗效果。

## 使用元件

* **ESP32 開發板** x 1
* **LED 燈** (紅、黃、綠) x 3
* **按鈕開關** x 2
* **SSD1306 128x64 OLED 顯示器** x 1

## 硬體連接

* **LEDs**:
    * 紅燈: GPIO 16
    * 黃燈: GPIO 12
    * 綠燈: GPIO 13
* **Buttons**:
    * 按鈕 A (移動選擇): GPIO 5
    * 按鈕 B (確認選擇): GPIO 36
* **OLED (I2C)**:
    * SDA: GPIO 21 (請依實際接線調整)
    * SCL: GPIO 22 (請依實際接線調整)
    * VCC: 3.3V
    * GND: GND

## 軟體與開發環境

* **韌體**：MicroPython
* **IDE**：Thonny
* **函式庫**：
    * `ssd1306.py` (OLED 驅動函式庫，需上傳至 ESP32)

## 程式碼說明

主程式 `main.py` 包含了遊戲的所有邏輯：
* **引腳定義與初始化**：設定所有硬體元件的 GPIO 引腳。
* **`CHARACTER_DATA`**：定義了 OLED 顯示所需的自定義字符（例如箭頭、方框、顏色字）。
* **`draw_custom_char(x, y, char_data, color)`**：基於 `CHARACTER_DATA` 繪製 16x16 像素的自定義圖案。
* **`draw_game_screen(selected_index, confirmed_index)`**：控制 OLED 遊戲介面顯示，包括顏色文字、選擇框、箭頭和勾號。
* **`light_led(led_index)`**：控制特定 LED 的點亮與熄滅。
* **`play_sequence()`**：播放當前記憶序列的燈光。
* **`read_buttons_for_selection()`**：處理玩家的按鈕輸入，控制選擇移動和確認。
* **`check_user_sequence()`**：比對玩家輸入與正確序列，判斷遊戲勝負。
* **`game_over()`**：處理遊戲結束邏輯，顯示分數並提供重新開始選項。
* **`play_level_up_effect()`**：成功過關時的燈光提示效果。
* **主迴圈**：管理遊戲的整體流程，包括生成新序列、播放、接收輸入、判斷結果和狀態切換。

## 如何運行

1.  **安裝 MicroPython 韌體**：確保你的 ESP32 已刷入 MicroPython 韌體。
2.  **準備函式庫**：將 `ssd1306.py` 檔案上傳到 ESP32 的檔案系統根目錄。
3.  **上傳主程式**：將 `main.py` (或你使用的其他檔名) 檔案上傳到 ESP32 的檔案系統根目錄。
4.  **連接硬體**：按照上方「硬體連接」部分所示，連接所有元件。
5.  **啟動遊戲**：ESP32 上電後，OLED 會顯示「記憶挑戰」和「按任意鍵開始」。按下任意按鈕即可開始遊戲。

## 遇到的問題與解決方式

在開發過程中，我們解決了以下主要問題：
1.  **`NameError` 錯誤**：解決了因變數定義順序導致的 `box_width` 未定義問題，通過調整變數宣告順序來確保其在使用前已被初始化。
2.  **Thonny 終端機顯示錯誤**：修正了 `print` 語句中燈號名稱列表 `led_color_names` 的順序，使其與實際燈號的物理索引一致，確保終端機輸出與OLED顯示和實際操作吻合。

## 結論與心得

本專案成功展示了 ESP32 在結合多種傳感器、顯示和控制技術方面應用潛力。透過這次實作，不僅加深了對 MicroPython 程式設計的理解，也提升了硬體整合和除錯的能力。這是一個從概念到實際運行的完整專案，為未來更複雜的嵌入式系統開發打下了堅實基礎。

## 執行結果影片



---
