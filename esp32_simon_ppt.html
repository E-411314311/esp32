<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 記憶挑戰遊戲 - 專案簡報</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            height: 100vh;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 90%;
            max-width: 1000px;
            height: 80vh;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: slideIn 0.5s ease-in-out;
            overflow-y: auto;
        }

        .slide.active {
            display: block;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }

        h2 {
            color: #34495e;
            font-size: 2em;
            margin-bottom: 25px;
            text-align: center;
        }

        h3 {
            color: #e74c3c;
            font-size: 1.3em;
            margin: 15px 0 10px 0;
        }

        p, li {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 12px;
            color: #2c3e50;
        }

        .highlight {
            background: linear-gradient(120deg, #a8e6cf 0%, #ffd3a5 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #27ae60;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .tech-item {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #bdc3c7;
            transition: transform 0.3s ease;
        }

        .tech-item:hover {
            transform: translateY(-5px);
            border-color: #3498db;
        }

        .system-diagram {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            border: 2px dashed #3498db;
        }

        .flow-chart {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .flow-item {
            background: #3498db;
            color: white;
            padding: 15px 20px;
            border-radius: 25px;
            margin: 10px;
            position: relative;
            min-width: 120px;
            text-align: center;
        }

        .flow-item::after {
            content: '→';
            position: absolute;
            right: -25px;
            font-size: 1.5em;
            color: #3498db;
        }

        .flow-item:last-child::after {
            display: none;
        }

        .problem-solution {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .problem-title {
            color: #e17055;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .solution-title {
            color: #00b894;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
        }

        .slide-counter {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.1em;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }

        ul {
            padding-left: 25px;
        }

        .center {
            text-align: center;
        }

        .large-text {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="slideshow-container">
        <!-- Slide 1: 專案名稱與簡介 -->
        <div class="slide active">
            <h1>ESP32 記憶挑戰遊戲</h1>
            <div class="center">
                <p class="large-text">Simon Says 遊戲實作</p>
            </div>
            
            <div class="highlight">
                <h3>專案目的</h3>
                <ul>
                    <li><strong>結合課堂知識：</strong>整合 ESP32 硬體操作、GPIO 控制、I2C 通訊等技術</li>
                    <li><strong>培養專案實作能力：</strong>從設計到測試的完整開發流程</li>
                    <li><strong>驗證系統整合：</strong>展示 ESP32 多周邊元件整合能力</li>
                    <li><strong>人機互動介面設計：</strong>利用 OLED 提供直觀視覺回饋</li>
                </ul>
            </div>

            <div class="center">
                <p style="margin-top: 30px; font-size: 1.2em; color: #7f8c8d;">
                    一個結合硬體控制與遊戲邏輯的嵌入式系統專案
                </p>
            </div>
        </div>

        <!-- Slide 2: 系統架構圖 -->
        <div class="slide">
            <h2>系統架構圖</h2>
            
            <div class="system-diagram">
                <h3 style="color: #3498db; margin-bottom: 25px;">硬體連接架構</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 2fr 1fr; gap: 30px; align-items: center;">
                    <div>
                        <h4>輸入裝置</h4>
                        <div class="tech-item">
                            <strong>按鈕 A</strong><br>
                            選擇功能
                        </div>
                        <div class="tech-item">
                            <strong>按鈕 B</strong><br>
                            確認功能
                        </div>
                    </div>
                    
                    <div>
                        <div class="tech-item" style="background: #3498db; color: white; font-size: 1.3em;">
                            <strong>ESP32</strong><br>
                            微控制器核心
                        </div>
                        <p style="margin: 15px 0; font-size: 0.9em;">GPIO 控制 + I2C 通訊</p>
                    </div>
                    
                    <div>
                        <h4>輸出裝置</h4>
                        <div class="tech-item">
                            <strong>LED 燈組</strong><br>
                            紅、黃、綠
                        </div>
                        <div class="tech-item">
                            <strong>OLED 顯示器</strong><br>
                            128x64 SSD1306
                        </div>
                    </div>
                </div>
            </div>

            <div class="flow-chart">
                <div class="flow-item">按鈕輸入</div>
                <div class="flow-item">ESP32 處理</div>
                <div class="flow-item">LED 回饋</div>
                <div class="flow-item">OLED 顯示</div>
            </div>
        </div>

        <!-- Slide 3: 使用元件與工具 -->
        <div class="slide">
            <h2>使用元件與工具</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h3>硬體元件</h3>
                    <div class="tech-grid">
                        <div class="tech-item">
                            <strong>ESP32 開發板</strong><br>
                            微控制器核心
                        </div>
                        <div class="tech-item">
                            <strong>LED × 3</strong><br>
                            紅、黃、綠燈
                        </div>
                        <div class="tech-item">
                            <strong>按鈕開關 × 2</strong><br>
                            遊戲控制輸入
                        </div>
                        <div class="tech-item">
                            <strong>OLED 顯示器</strong><br>
                            SSD1306 128×64
                        </div>
                        <div class="tech-item">
                            <strong>杜邦線</strong><br>
                            電路連接
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3>軟體工具</h3>
                    <div class="tech-grid">
                        <div class="tech-item">
                            <strong>MicroPython</strong><br>
                            韌體平台
                        </div>
                        <div class="tech-item">
                            <strong>Thonny IDE</strong><br>
                            開發環境
                        </div>
                        <div class="tech-item">
                            <strong>machine 庫</strong><br>
                            GPIO & I2C 控制
                        </div>
                        <div class="tech-item">
                            <strong>ssd1306.py</strong><br>
                            OLED 驅動庫
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 25px;">使用函式庫</h3>
                    <ul>
                        <li><code>time</code> - 時間延遲控制</li>
                        <li><code>random</code> - 隨機序列生成</li>
                        <li><code>machine</code> - 硬體控制介面</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 4: 程式設計核心概念 -->
        <div class="slide">
            <h2>程式設計核心概念</h2>
            
            <div class="highlight">
                <h3>🔧 MicroPython 應用</h3>
                <p>使用 MicroPython 實現硬體控制與遊戲邏輯，結合 GPIO 控制和 I2C 通訊</p>
            </div>

            <div class="highlight">
                <h3>🎨 OLED 自定義字符</h3>
                <p>透過 <code>CHARACTER_DATA</code> 定義 16×16 像素字符，使用 <code>draw_custom_char</code> 函數繪製箭頭、方框、顏色字等自定義圖案</p>
            </div>

            <div class="highlight">
                <h3>🎮 遊戲流程狀態機</h3>
                <div class="flow-chart">
                    <div class="flow-item">初始化</div>
                    <div class="flow-item">播放序列</div>
                    <div class="flow-item">接收輸入</div>
                    <div class="flow-item">判斷正確性</div>
                    <div class="flow-item">升級/結束</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px;">
                <div>
                    <h3>核心函數模組</h3>
                    <ul>
                        <li><code>draw_game_screen()</code> - OLED 畫面管理</li>
                        <li><code>play_sequence()</code> - 序列播放</li>
                        <li><code>read_buttons_for_selection()</code> - 按鈕輸入處理</li>
                    </ul>
                </div>
                <div>
                    <h3>重要變數</h3>
                    <ul>
                        <li><code>gameSequence</code> - 遊戲序列</li>
                        <li><code>gameIndex</code> - 當前關卡</li>
                        <li><code>current_selection_index</code> - 選擇索引</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 5: 程式碼片段與說明 -->
        <div class="slide">
            <h2>關鍵程式碼片段</h2>
            
            <h3>🎯 OLED 遊戲畫面繪製</h3>
            <div class="code-block">
def draw_game_screen(selection_index, confirmed_index):
    oled.fill(0)  # 清除螢幕
    # 繪製顏色選項和自定義字符
    for i, (color, char_data) in enumerate(colors):
        draw_custom_char(text_x_coords[i], 20, char_data)
        if i == selection_index:
            draw_custom_char(arrow_x_coords[i], 40, arrow_data)
    oled.show()
            </div>

            <h3>🔘 按鈕輸入處理邏輯</h3>
            <div class="code-block">
def read_buttons_for_selection():
    while True:
        if button_a.value() == 0:  # 按鈕 A：切換選擇
            current_selection_index = (current_selection_index + 1) % 3
            draw_game_screen(current_selection_index, -1)
        elif button_b.value() == 0:  # 按鈕 B：確認選擇
            return current_selection_index
        time.sleep(0.1)
            </div>

            <div class="highlight">
                <h3>💡 設計亮點</h3>
                <ul>
                    <li><strong>動態介面更新：</strong>即時顯示選擇箭頭和確認狀態</li>
                    <li><strong>防抖動處理：</strong>適當延遲避免按鈕誤觸</li>
                    <li><strong>模組化設計：</strong>功能分離便於維護和除錯</li>
                </ul>
            </div>
        </div>

        <!-- Slide 6: 測試過程與成果展示 -->
        <div class="slide">
            <h2>測試過程與成果展示</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                <div>
                    <h3>📋 測試方法</h3>
                    <div class="tech-item">
                        <strong>硬體連接確認</strong><br>
                        檢查 LED、按鈕、OLED 引腳連接
                    </div>
                    <div class="tech-item">
                        <strong>函式庫上傳</strong><br>
                        確保 ssd1306.py 正確載入
                    </div>
                    <div class="tech-item">
                        <strong>功能測試</strong><br>
                        逐項驗證遊戲各項功能
                    </div>
                </div>
                
                <div>
                    <h3>✅ 測試結果</h3>
                    <div class="highlight">
                        <ul>
                            <li>OLED 顯示正常，自定義字符清晰</li>
                            <li>LED 燈號依照序列正確閃爍</li>
                            <li>按鈕輸入響應靈敏，選擇功能正常</li>
                            <li>遊戲邏輯正確，判斷準確</li>
                            <li>升級效果和失敗提示運作順暢</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="system-diagram">
                <h3>🎥 實際運行展示</h3>
                <div class="flow-chart">
                    <div class="flow-item">開機畫面</div>
                    <div class="flow-item">序列播放</div>
                    <div class="flow-item">玩家輸入</div>
                    <div class="flow-item">結果判斷</div>
                    <div class="flow-item">升級/結束</div>
                </div>
                <p style="margin-top: 15px; font-style: italic;">
                    📹 建議錄製完整遊戲流程影片，展示各階段功能運作
                </p>
            </div>

            <div class="center">
                <p class="large-text" style="color: #27ae60;">
                    ✨ 所有功能測試通過，系統運行穩定 ✨
                </p>
            </div>
        </div>

        <!-- Slide 7: 遇到的問題與解決方式 -->
        <div class="slide">
            <h2>遇到的問題與解決方式</h2>
            
            <div class="problem-solution">
                <div class="problem-title">🚫 問題一：NameError: name 'box_width' isn't defined</div>
                <p><strong>原因：</strong>在 box_x_coords 列表推導式中使用 box_width 變數時，該變數尚未被定義。</p>
                
                <div class="solution-title">✅ 解決方式：</div>
                <p>調整變數定義順序，將 box_width 和 box_height 的定義位置移到所有依賴它們計算的變數之前，確保變數在使用前已經被賦值。</p>
            </div>

            <div class="problem-solution">
                <div class="problem-title">🚫 問題二：Thonny 終端機黃、綠燈顯示顛倒</div>
                <p><strong>原因：</strong>程式碼中 led_color_names 列表順序 ["紅", "綠", "黃"] 與實際 ledPins 陣列順序 [紅, 黃, 綠] 不一致。</p>
                
                <div class="solution-title">✅ 解決方式：</div>
                <p>將 led_color_names 列表調整為 ["紅", "黃", "綠"]，使其與 ledPins 的索引順序保持一致。</p>
            </div>

            <div class="highlight">
                <h3>💡 學習收穫</h3>
                <ul>
                    <li><strong>變數作用域重要性：</strong>理解程式碼執行順序對變數可用性的影響</li>
                    <li><strong>除錯技巧：</strong>學會從錯誤訊息中找出問題根源</li>
                    <li><strong>細節重要性：</strong>小細節在專案成功中扮演關鍵角色</li>
                    <li><strong>系統性思考：</strong>硬體與軟體需要完美配合才能達到預期效果</li>
                </ul>
            </div>
        </div>

        <!-- Slide 8: 結論與心得 -->
        <div class="slide">
            <h2>結論與心得</h2>
            
            <div class="highlight">
                <h3>🎯 專案成果總結</h3>
                <p>本專案成功使用 ESP32 實作了一個功能完整的記憶挑戰遊戲。透過 MicroPython 程式設計，結合了 GPIO 控制與 I2C 通訊的課堂知識。遊戲界面直觀，操作簡單，成功驗證了 ESP32 在嵌入式系統應用上的多功能性和便捷性。</p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin: 25px 0;">
                <div>
                    <h3>📚 技術成就</h3>
                    <ul>
                        <li>掌握 ESP32 硬體控制技術</li>
                        <li>熟練 MicroPython 程式開發</li>
                        <li>實現 OLED 自定義字符顯示</li>
                        <li>完成多周邊元件整合</li>
                        <li>建立完整的人機互動系統</li>
                    </ul>
                </div>
                
                <div>
                    <h3>🌟 個人成長</h3>
                    <ul>
                        <li>提升獨立解決問題的能力</li>
                        <li>培養專案管理與規劃技能</li>
                        <li>深化硬體與軟體整合理解</li>
                        <li>增強除錯與測試經驗</li>
                        <li>建立系統性思考模式</li>
                    </ul>
                </div>
            </div>

            <div class="system-diagram">
                <h3>🚀 未來改進方向</h3>
                <div class="flow-chart">
                    <div class="flow-item">增加難度等級</div>
                    <div class="flow-item">加入聲音效果</div>
                    <div class="flow-item">記錄最高分數</div>
                    <div class="flow-item">網路連線功能</div>
                </div>
            </div>

            <div class="center">
                <p class="large-text" style="color: #e74c3c; margin-top: 20px;">
                    這次專案為未來在物聯網與嵌入式系統領域的學習奠定了堅實基礎！
                </p>
            </div>
        </div>

        <!-- Slide 9: Q&A / 感謝頁 -->
        <div class="slide">
            <div class="center" style="height: 100%; display: flex; flex-direction: column; justify-content: center;">
                <h1 style="font-size: 3em; color: #3498db; margin-bottom: 30px;">
                    感謝聆聽！
                </h1>
                
                <div class="highlight" style="margin: 40px 0;">
                    <h2 style="color: #2c3e50;">ESP32 記憶挑戰遊戲</h2>
                    <p class="large-text">專案展示完成</p>
                </div>

                <div style="background: #ecf0f1; padding: 30px; border-radius: 15px; margin: 30px 0;">
                    <h3 style="color: #34495e; margin-bottom: 20px;">🤔 Questions & Answers</h3>
                    <p style="font-size: 1.2em; color: #7f8c8d;">
                        歡迎提出任何關於專案的問題<br>
                        包括技術實作、設計理念、或改進建議
                    </p>
                </div>

                <div class="flow-chart" style="justify-content: center;">
                    <div class="flow-item" style="background: #e74c3c;">專案完成</div>
                    <div class="flow-item" style="background: #f39c12;">經驗累積</div>
                    <div class="flow-item" style="background: #27ae60;">持續學習</div>
                </div>

                <p style="font-size: 1.1em; color: #95a5a6; margin-top: 30px;">
                    謝謝大家的時間與關注！
                </p>
            </div>
        </div>
    </div>

    <div class="slide-counter">
        <span id="currentSlide">1</span> / <span id="totalSlides">9</span>
    </div>

    <div class="controls">
        <button class="btn" onclick="changeSlide(-1)">⬅ 上一頁</button>
        <button class="btn" onclick="changeSlide(1)">下一頁 ➡</button>
    </div>

    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        document.getElementById('totalSlides').textContent = totalSlides;

        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            document.getElementById('currentSlide').textContent = index + 1;
        }

        function changeSlide(direction) {
            currentSlideIndex += direction;
            
            if (currentSlideIndex >= totalSlides) {
                currentSlideIndex = 0;
            } else if (currentSlideIndex < 0) {
                currentSlideIndex = totalSlides - 1;
            }
            
            showSlide(currentSlideIndex);
        }

        // 鍵盤控制
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowRight' || event.key === ' ') {
                changeSlide(1);
            } else if (event.key === 'ArrowLeft') {
                changeSlide(-1);
            }
        });

        // 初始化
        showSlide(0);
    </script>
</body>
</html>